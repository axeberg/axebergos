# axeberg

A mini operating system written in Rust, compiled to WebAssembly, running entirely in your browser.

> **Note**: Generated by Anthropic's Claude (Opus 4.5) for exploration purposes. Use at your own risk.

## Overview

axeberg is an operating system designed to be understood by one person. Clean abstractions, comprehensive tests (~1,000+), and ~62,000 lines of documented Rust code.

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              Browser                                     │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                           axeberg OS                               │  │
│  │                                                                    │  │
│  │   ┌──────────────────────────────────────────────────────────┐    │  │
│  │   │ Shell                                                     │    │  │
│  │   │  $ cat log.txt | grep ERROR | wc -l                      │    │  │
│  │   └─────────────────────────┬────────────────────────────────┘    │  │
│  │                             │                                      │  │
│  │                             ▼                                      │  │
│  │   ┌──────────────────────────────────────────────────────────┐    │  │
│  │   │                        Kernel                             │    │  │
│  │   │  ┌────────────┐ ┌────────────┐ ┌────────────────────┐    │    │  │
│  │   │  │ Processes  │ │   Memory   │ │       VFS          │    │    │  │
│  │   │  │  + Signals │ │  + COW     │ │ MemoryFs/LayeredFs │    │    │  │
│  │   │  └────────────┘ └────────────┘ └────────────────────┘    │    │  │
│  │   │  ┌────────────┐ ┌────────────┐ ┌────────────────────┐    │    │  │
│  │   │  │   Users    │ │    IPC     │ │   WASM Loader      │    │    │  │
│  │   │  │  + Groups  │ │ pipe/shm/uds│ │  + WASI Preview2  │    │    │  │
│  │   │  └────────────┘ └────────────┘ └────────────────────┘    │    │  │
│  │   └──────────────────────────────────────────────────────────┘    │  │
│  │                             │                                      │  │
│  │                             ▼                                      │  │
│  │   ┌──────────────────────────────────────────────────────────┐    │  │
│  │   │              Terminal (xterm.js) / Compositor             │    │  │
│  │   └──────────────────────────────────────────────────────────┘    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
```

## Features

| Category | Capabilities |
|----------|--------------|
| **Shell** | Pipes, redirects, job control, functions, arrays, heredocs, process substitution |
| **Users** | Multi-user with `/etc/passwd` persistence, sessions, su/sudo, capabilities |
| **Filesystem** | In-memory VFS, layered (union) mounts, proc/sys/dev virtual filesystems |
| **Process** | Fork/exec, signals, resource limits, priority (nice), jails (chroot) |
| **IPC** | Pipes, FIFOs, message queues, semaphores, Unix domain sockets, file locking |
| **Security** | Capability-based security, process sandboxing, salted password hashing |
| **WASM** | Module loader, WASI Preview2, package manager |

## Quick Start

```bash
# Prerequisites
curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh

# Build and run
wasm-pack build --target web
cargo run --bin serve

# Open http://localhost:8080
```

## Usage

```bash
$ help                        # List commands
$ ls -la                      # List files
$ cat /etc/passwd             # View users
$ echo "test" > file.txt      # Write file
$ cat file.txt | wc -l        # Pipeline

# User management
$ useradd alice               # Create user
$ passwd alice                # Set password
$ su alice                    # Switch user

# Job control
$ sleep 100 &                 # Background job
$ jobs                        # List jobs
$ fg %1                       # Foreground
```

## Documentation

| Document | Description |
|----------|-------------|
| [Documentation Index](docs/index.md) | Complete documentation |
| [Kernel Overview](docs/kernel/overview.md) | Architecture |
| [Syscall Reference](docs/kernel/syscalls.md) | System call API |
| [Shell Guide](docs/userspace/shell.md) | Command-line usage |
| [Building](docs/development/building.md) | Build instructions |
| [Decision Records](docs/decisions/README.md) | Architecture decisions |

## Project Structure

```
axebergos/
├── src/
│   ├── kernel/              # OS kernel
│   │   ├── syscall.rs       # System calls (300+)
│   │   ├── process.rs       # Process management
│   │   ├── memory.rs        # Memory (COW, mmap)
│   │   ├── signal.rs        # POSIX-like signals
│   │   ├── users.rs         # Users, groups, capabilities
│   │   ├── wasm/            # WASM loader + WASI
│   │   ├── work_stealing/   # Work-stealing scheduler
│   │   └── pkg/             # Package manager
│   ├── shell/               # Command interpreter
│   │   ├── parser.rs        # Shell parsing
│   │   ├── executor.rs      # Pipeline execution
│   │   ├── builtins.rs      # Built-in commands
│   │   └── programs/        # Shell commands (80+)
│   ├── vfs/                 # Virtual filesystem
│   │   ├── memory.rs        # In-memory FS
│   │   └── layered.rs       # Union filesystem
│   └── compositor/          # WebGPU compositor
├── docs/                    # Documentation
├── man/                     # Man pages (scdoc)
└── tests/                   # Integration tests
```

## Testing

```bash
cargo test                   # All tests (~1,000+)
cargo test --lib             # Unit tests only
cargo test integration       # Integration tests
```

## Deployment

### Static Hosting

Deploy to GitHub Pages, Netlify, Vercel, or any static host:

```
├── index.html
└── pkg/
    ├── axeberg.js
    └── axeberg_bg.wasm
```

### Docker

```dockerfile
FROM rust:latest as builder
RUN curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh
WORKDIR /app
COPY . .
RUN wasm-pack build --target web --release

FROM nginx:alpine
COPY --from=builder /app/index.html /usr/share/nginx/html/
COPY --from=builder /app/pkg /usr/share/nginx/html/pkg/
EXPOSE 80
```

### Embed

```javascript
import init from './pkg/axeberg.js';
await init();
```

## License

MIT
